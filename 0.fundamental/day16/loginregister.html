<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <center>
        <h1>Login & Register</h1>
        Username: <input type="text" id="username" placeholder="Username..."> <br>
        Password: <input type="password" id="pass" placeholder="Password..."> <br>
        <button id="register">Register</button> <button id="login" onclick="login()">Login</button> <br>
        <h1></h1>
        <h1></h1>
        <p</p>
    </center>
</body>
<script>
    class List{
        constructor(a,b,c) {
            this.username=a
            this.password=b
            this.role=c
        }
    }
    
    var datausers=[
        new List('admin','admin','admin'),
        new List('hendri','hendri','user'),
    ]

    var datauserlogin={}

    const login=()=>{
        var username= document.getElementById("username").value
        var pass= document.getElementById("pass").value
        // var login=false
        // for(i=0;i<datausers.length;i++){
        //     if (username == datausers[i].username && pass==datausers[i].password) {
        //         login=true
        //         datauserlogin=datausers[i]
        //     }
        // }
        var arrbaru=datausers.filter((val)=>val.username==username && val.password==pass)
        datauserlogin=arrbaru[0]
        console.log(login)
        if (datauserlogin) {
            document.getElementsByTagName('h1')[1].innerHTML=datauserlogin.username
            if (datauserlogin.role=='admin') {
                document.getElementsByTagName('h1')[2].innerHTML='Sebagai admin kece'
            } else {
                document.getElementsByTagName('h1')[2].innerHTML = 'Sebagai user unyu'
            }
            document.getElementsByTagName('p')[0].innerHTML=`<button onclick="logoutuser()">Logout</button>`
        }else{
            document.getElementsByTagName('h1')[1].innerHTML='user tidak ditemukan atau password salah'
            document.getElementsByTagName('h1')[2].innerHTML=''
            document.getElementsByTagName('p')[0].innerHTML=''
        }
    }

    const logoutuser=()=>{
        datauserlogin={}
        document.getElementsByTagName('h1')[1].innerHTML=''
        document.getElementsByTagName('h1')[2].innerHTML = ''
        document.getElementsByTagName('p')[0].innerHTML = ''
    }
    const register=()=>{
        var username=document.getElementById('username').value
        var pass=document.getElementById('password').value
        datausers.push(new List(username,pass,'user'))
        document.getElementsByTagName('h1')[1].innerHTML='berhasil register'
    }
    
</script>

</html>
